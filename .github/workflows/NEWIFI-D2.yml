#
# This is free software, lisence use MIT.
# 
# Copyright (C) 2019 P3TERX <https://p3terx.com>
# Copyright (C) 2019 KFERMercer <KFER.Mercer@gmail.com>
# Copyright (C) 2020 LemoFire <https://www.ito.fun>
#
# <https://github.com/P3TERX/Actions-OpenWrt> 
# <https://github.com/KFERMercer/OpenWrt-CI>
# <https://github.com/LemoFire/autoOpenWrt>
#

name: NEWIFI-D2

on:
  push:
    branches: 
      - master
  schedule:
    - cron: 0 */12 * * *
  watch:
    types: started

jobs:
  build:
    runs-on: ubuntu-latest
    if: github.event.repository.owner.id == github.event.sender.id

    steps:
      - name: Checkout
        uses: actions/checkout@master
      - name: Initialization environment
        env:
          DEBIAN_FRONTEND: noninteractive
        run: |
          sudo -E apt-get -yqq update
          sudo -E apt-get -yqq install build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch python3 unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint device-tree-compiler g++-multilib
          sudo -E apt-get -y autoremove --purge
          sudo -E apt-get clean
      - name: Download openwrt
        run: |
          git clone https://git.openwrt.org/openwrt/openwrt.git
          cd openwrt
          git pull
          git branch -a
          git checkout origin/openwrt-21.02 -b openwrt-21.02
          mv ./openwrt/* ./
      - name: Install addons
        run: |
          echo "src-git small https://github.com/kenzok8/small" >> ./feeds.conf.default
          echo "src-git kenzo https://github.com/kenzok8/openwrt-packages" >> ./feeds.conf.default
          echo "src-git helloworld  https://github.com/fw876/helloworld" >> ./feeds.conf.default
          echo "src-git passwall https://github.com/xiaorouji/openwrt-passwall" >> ./feeds.conf.default
          echo "src-git upx https://github.com/kuoruan/openwrt-upx" >> ./feeds.conf.default
          echo "src-git lienol https://github.com/Lienol/openwrt-package" >> ./feeds.conf.default
      - name: Update feeds
        run: |
          ./scripts/feeds update -a
          ./scripts/feeds install -a
      - name: Costom configure file
        run: |
          rm -f ./.config*
          touch ./.config
          cat >> .config <<EOF
          CONFIG_TARGET_ramips=y
          CONFIG_TARGET_ramips_mt7621=y
          CONFIG_TARGET_MULTI_PROFILE=n
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_adslr_g7=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_adslr_g7=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_afoundry_ew1200=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_afoundry_ew1200=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_alfa-network_quad-e4g=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_alfa-network_quad-e4g=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_ampedwireless_ally-00x19k=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_ampedwireless_ally-00x19k=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_ampedwireless_ally-r1900k=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_ampedwireless_ally-r1900k=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_asiarf_ap7621-001=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_asiarf_ap7621-001=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_asiarf_ap7621-nv1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_asiarf_ap7621-nv1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_asus_rt-ac57u=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_asus_rt-ac57u=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_asus_rt-ac65p=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_asus_rt-ac65p=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_asus_rt-ac85p=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_asus_rt-ac85p=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_asus_rt-n56u-b1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_asus_rt-n56u-b1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_buffalo_wsr-1166dhp=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_buffalo_wsr-1166dhp=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_buffalo_wsr-2533dhpl=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_buffalo_wsr-2533dhpl=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_buffalo_wsr-600dhp=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_buffalo_wsr-600dhp=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xzwifi_creativebox-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xzwifi_creativebox-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_cudy_wr1300=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_cudy_wr1300=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_cudy_wr2100=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_cudy_wr2100=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-1960-a1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-1960-a1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-2640-a1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-2640-a1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-2660-a1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-2660-a1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-860l-b1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-860l-b1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-867-a1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-867-a1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-878-a1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-878-a1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-882-a1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-882-a1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_dlink_dir-882-r1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_dlink_dir-882-r1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_edimax_rg21s=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_edimax_rg21s=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_edimax_ra21s=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_edimax_ra21s=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_edimax_re23s=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_edimax_re23s=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1167ghbk2-s=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1167ghbk2-s=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1167gs2-b=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1167gs2-b=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1167gst2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1167gst2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1750gs=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1750gs=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1750gst2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1750gst2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1750gsv=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1750gsv=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-1900gst=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-1900gst=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-2533ghbk-i=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-2533ghbk-i=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-2533gst=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-2533gst=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_elecom_wrc-2533gst2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_elecom_wrc-2533gst2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_firefly_firewrt=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_firefly_firewrt=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_gehua_ghl-r-001=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_gehua_ghl-r-001=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_winstars_ws-wn583a6=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_winstars_ws-wn583a6=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_glinet_gl-mt1300=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_glinet_gl-mt1300=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_gnubee_gb-pc1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_gnubee_gb-pc1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_gnubee_gb-pc2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_gnubee_gb-pc2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_hiwifi_hc5962=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_hiwifi_hc5962=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wn-ax1167gr=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wn-ax1167gr=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wn-ax1167gr2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wn-ax1167gr2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wn-ax2033gr=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wn-ax2033gr=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wn-dx1167r=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wn-dx1167r=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wn-dx1200gr=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wn-dx1200gr=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wn-gx300gr=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wn-gx300gr=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iodata_wnpr2600g=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iodata_wnpr2600g=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iptime_a6ns-m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iptime_a6ns-m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_iptime_a8004t=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_iptime_a8004t=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_jcg_jhr-ac876m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_jcg_jhr-ac876m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_jcg_q20=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_jcg_q20=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_jcg_y2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_jcg_y2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_linksys_e5600=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_linksys_e5600=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_linksys_ea7300-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_linksys_ea7300-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_linksys_ea7300-v2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_linksys_ea7300-v2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_linksys_ea7500-v2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_linksys_ea7500-v2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_linksys_ea8100-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_linksys_ea8100-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_linksys_re6500=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_linksys_re6500=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mediatek_ap-mt7621a-v60=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mediatek_ap-mt7621a-v60=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mediatek_mt7621-eval-board=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mediatek_mt7621-eval-board=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mikrotik_routerboard-750gr3=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mikrotik_routerboard-750gr3=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mikrotik_routerboard-760igs=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mikrotik_routerboard-760igs=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mikrotik_routerboard-m11g=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mikrotik_routerboard-m11g=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mikrotik_routerboard-m33g=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mikrotik_routerboard-m33g=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mqmaker_witi=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mqmaker_witi=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_mtc_wr1201=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_mtc_wr1201=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_ex6150=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_ex6150=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_r6700-v2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_r6700-v2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_r6220=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_r6220=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_r6260=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_r6260=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_r6350=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_r6350=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_r6800=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_r6800=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_r6850=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_r6850=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_wac104=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_wac104=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_wac124=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_wac124=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netgear_wndr3700-v5=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netgear_wndr3700-v5=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_netis_wf2881=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_netis_wf2881=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_lenovo_newifi-d1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_lenovo_newifi-d1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_d-team_newifi-d2=y
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_d-team_newifi-d2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_d-team_pbr-m1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_d-team_pbr-m1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_phicomm_k2p=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_phicomm_k2p=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_planex_vr500=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_planex_vr500=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_samknows_whitebox-v8=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_samknows_whitebox-v8=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_sercomm_na502=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_sercomm_na502=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_storylink_sap-g3200u3=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_storylink_sap-g3200u3=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_telco-electronics_x1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_telco-electronics_x1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_thunder_timecloud=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_thunder_timecloud=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_totolink_a7000r=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_totolink_a7000r=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_totolink_x5000r=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_totolink_x5000r=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_tplink_archer-a6-v3=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_tplink_archer-a6-v3=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_tplink_archer-c6u-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_tplink_archer-c6u-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_tplink_eap235-wall-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_tplink_eap235-wall-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_tplink_re350-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_tplink_re350-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_tplink_re500-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_tplink_re500-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_tplink_re650-v1=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_tplink_re650-v1=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_ubnt_edgerouter-x=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_ubnt_edgerouter-x=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_ubnt_edgerouter-x-sfp=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_ubnt_edgerouter-x-sfp=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_ubnt_unifi-6-lite=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_ubnt_unifi-6-lite=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_ubnt_unifi-nanohd=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_ubnt_unifi-nanohd=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_unielec_u7621-01-16m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_unielec_u7621-01-16m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_unielec_u7621-06-16m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_unielec_u7621-06-16m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_unielec_u7621-06-64m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_unielec_u7621-06-64m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_wavlink_wl-wn531a6=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_wavlink_wl-wn531a6=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_wevo_11acnas=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_wevo_11acnas=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_wevo_w2914ns-v2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_wevo_w2914ns-v2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_mi-router-3-pro=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_mi-router-3-pro=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_mi-router-3g=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_mi-router-3g=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_mi-router-3g-v2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_mi-router-3g-v2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_mi-router-4=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_mi-router-4=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_mi-router-4a-gigabit=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_mi-router-4a-gigabit=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_mi-router-ac2100=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_mi-router-ac2100=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaomi_redmi-router-ac2100=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaomi_redmi-router-ac2100=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_xiaoyu_xy-c5=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_xiaoyu_xy-c5=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_youhua_wr1200js=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_youhua_wr1200js=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_youku_yk-l2=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_youku_yk-l2=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zbtlink_zbt-we1326=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zbtlink_zbt-we1326=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zbtlink_zbt-we3526=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zbtlink_zbt-we3526=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zbtlink_zbt-wg2626=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zbtlink_zbt-wg2626=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zbtlink_zbt-wg3526-16m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zbtlink_zbt-wg3526-16m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zbtlink_zbt-wg3526-32m=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zbtlink_zbt-wg3526-32m=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zio_freezio=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zio_freezio=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zyxel_nr7101=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zyxel_nr7101=""
          CONFIG_TARGET_DEVICE_ramips_mt7621_DEVICE_zyxel_wap6805=n
          CONFIG_TARGET_DEVICE_PACKAGES_ramips_mt7621_DEVICE_zyxel_wap6805=""
          CONFIG_ALL_KMODS=y
          CONFIG_ALL_NONSHARED=y
          CONFIG_DEVEL=y
          CONFIG_TARGET_PER_DEVICE_ROOTFS=y
          CONFIG_AUTOREMOVE=y
          CONFIG_BUILDBOT=y
          CONFIG_COLLECT_KERNEL_DEBUG=y
          CONFIG_IB=y
          CONFIG_IMAGEOPT=y
          CONFIG_JSON_OVERVIEW_IMAGE_INFO=y
          CONFIG_KERNEL_BUILD_DOMAIN="buildhost"
          CONFIG_KERNEL_BUILD_USER="builder"
          # CONFIG_KERNEL_KALLSYMS is not set
          CONFIG_PACKAGE_cgi-io=y
          CONFIG_PACKAGE_libiwinfo-lua=y
          CONFIG_PACKAGE_liblua=y
          CONFIG_PACKAGE_liblucihttp=y
          CONFIG_PACKAGE_liblucihttp-lua=y
          CONFIG_PACKAGE_libubus-lua=y
          CONFIG_PACKAGE_lua=y
          CONFIG_PACKAGE_luci=y
          CONFIG_PACKAGE_luci-app-firewall=y
          CONFIG_PACKAGE_luci-app-opkg=y
          CONFIG_PACKAGE_luci-base=y
          CONFIG_PACKAGE_luci-lib-base=y
          CONFIG_PACKAGE_luci-lib-ip=y
          CONFIG_PACKAGE_luci-lib-jsonc=y
          CONFIG_PACKAGE_luci-lib-nixio=y
          CONFIG_PACKAGE_luci-mod-admin-full=y
          CONFIG_PACKAGE_luci-mod-network=y
          CONFIG_PACKAGE_luci-mod-status=y
          CONFIG_PACKAGE_luci-mod-system=y
          CONFIG_PACKAGE_luci-proto-ipv6=y
          CONFIG_PACKAGE_luci-proto-ppp=y
          CONFIG_PACKAGE_luci-ssl=y
          CONFIG_PACKAGE_luci-theme-bootstrap=y
          CONFIG_PACKAGE_px5g-wolfssl=y
          CONFIG_PACKAGE_rpcd=y
          CONFIG_PACKAGE_rpcd-mod-file=y
          CONFIG_PACKAGE_rpcd-mod-iwinfo=y
          CONFIG_PACKAGE_rpcd-mod-luci=y
          CONFIG_PACKAGE_rpcd-mod-rrdns=y
          CONFIG_PACKAGE_uhttpd=y
          CONFIG_PACKAGE_uhttpd-mod-ubus=y
          CONFIG_REPRODUCIBLE_DEBUG_INFO=y
          CONFIG_SDK=y
          CONFIG_TARGET_ALL_PROFILES=y
          CONFIG_VERSIONOPT=y
          CONFIG_VERSION_BUG_URL=""
          CONFIG_VERSION_CODE=""
          CONFIG_VERSION_DIST="OpenWrt"
          CONFIG_VERSION_FILENAMES=y
          CONFIG_VERSION_HOME_URL=""
          CONFIG_VERSION_HWREV=""
          CONFIG_VERSION_MANUFACTURER=""
          CONFIG_VERSION_MANUFACTURER_URL=""
          CONFIG_VERSION_NUMBER=""
          CONFIG_VERSION_PRODUCT=""
          CONFIG_VERSION_REPO="https://downloads.openwrt.org/releases/21.02.0"
          CONFIG_VERSION_SUPPORT_URL=""
          EOF
                    
          make defconfig
      - name: Download package source code
        run: |
          make download -j8
      - name: Compile firmware
        run: |
          echo -e "$(nproc) thread build."
          make -j$(nproc) V=s
      - name : Upload artifact
        uses: actions/upload-artifact@master
        with:
          name: OpenWrt-newifi-d2
          path: bin/targets/ramips/mt7621/openwrt-ramips-mt7621-d-team_newifi-d2-squashfs-sysupgrade.bin
